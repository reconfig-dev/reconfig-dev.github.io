<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Reconfig RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Reconfig Atom Feed"><title data-react-helmet="true">Use All Tunable Vivado Internal Params | Reconfig</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://reconfig.dev/vivado-internal-params"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Use All Tunable Vivado Internal Params | Reconfig"><meta data-react-helmet="true" name="description" content="So I learned about this parameter that can be set in vivado, called place.debugShape, for my overlay generation work. It was referred in one of the tcl scripts in RapidWright with the command setparam place.debugShape $shapesFileName. Studying the tcl commands guide, I found out, you can list the description of this property using reportparam -nondefault, which suggests place.debugShape is an internal knob. A caveat of the reportparam command is that, it only lists these internal params when it is changed from its default value (you can know its default value by getparam). That is, reportparam -non_default won&#x27;t show you all the internal knobs that are in vivado."><meta data-react-helmet="true" property="og:description" content="So I learned about this parameter that can be set in vivado, called place.debugShape, for my overlay generation work. It was referred in one of the tcl scripts in RapidWright with the command setparam place.debugShape $shapesFileName. Studying the tcl commands guide, I found out, you can list the description of this property using reportparam -nondefault, which suggests place.debugShape is an internal knob. A caveat of the reportparam command is that, it only lists these internal params when it is changed from its default value (you can know its default value by getparam). That is, reportparam -non_default won&#x27;t show you all the internal knobs that are in vivado."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-03-31T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://syed-ahmed.github.io"><meta data-react-helmet="true" property="article:tag" content="vivado,fpga,tcl"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://reconfig.dev/vivado-internal-params"><link data-react-helmet="true" rel="alternate" href="https://reconfig.dev/vivado-internal-params" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://reconfig.dev/vivado-internal-params" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.69e28f22.css">
<link rel="preload" href="/assets/js/runtime~main.19767bf0.js" as="script">
<link rel="preload" href="/assets/js/main.47d521c6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Reconfig logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Reconfig logo" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><a class="navbar__item navbar__link" href="/">Technical Articles on Reconfigurable Computing</a></div><div class="navbar__items navbar__items--right"><a href="https://reconfig.dev/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://reconfig.dev/atom.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/yaml-based-vivado-hardware-project">Creating Vivado Hardware Platform using YAML</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/vivado-internal-params">Use All Tunable Vivado Internal Params</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Use All Tunable Vivado Internal Params</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2020-03-31T00:00:00.000Z" itemprop="datePublished">March 31, 2020</time> Â· <!-- -->2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://syed-ahmed.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://syed-ahmed.github.io/images/profile-pic1.jpg" alt="Syed Tousif Ahmed"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://syed-ahmed.github.io" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Syed Tousif Ahmed</span></a></div><small class="avatar__subtitle" itemprop="description">PhD Student, IC Group, UPenn</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>So I learned about this parameter that can be set in vivado, called <code>place.debugShape</code>, for my overlay generation work. It was referred in one of the tcl scripts in RapidWright with the command <code>set_param place.debugShape $shapesFileName</code>. Studying the tcl commands guide, I found out, you can list the description of this property using <code>report_param -non_default</code>, which suggests <code>place.debugShape</code> is an internal knob. A caveat of the report_param command is that, it only lists these internal params when it is changed from its default value (you can know its default value by <code>get_param</code>). That is, <code>report_param -non_default</code> won&#x27;t show you all the internal knobs that are in vivado. </p><p>Now that you have some context, it got me thinking are there other useful params which we should know about? Looks like somebody asked the same <a href="https://forums.xilinx.com/t5/Vivado-TCL-Community/lt-list-param-gt-not-listing-a-lot/td-p/998194" target="_blank" rel="noopener noreferrer">question</a> in Xilinx&#x27;s forum, but received a reply from Xilinx saying those are internal and thou shall not use it.
When using the <code>place.debugShape</code> in my scripts, I saw some outputs:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Shape builder is called from:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stack:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/Xilinx/Vivado/2018.3/lib/lnx64.o/librdi_place.so(HAPLPlacerShapeBuilder::buildShapes(HDPLNewShapeDB&amp;, HSTPtrHashSet&amp;, HDPLTask&amp;, HAPLPlaceApi*, HDPLControlSetDB const*,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/Xilinx/Vivado/2018.3/lib/lnx64.o/librdi_implflow.so(HAPLFFastFlow3::place(HAPLFFastFlowParam const&amp;, HAPLFMigPblockInfo const*)+0x12cf) [0x7f51a8e7bb3f]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/Xilinx/Vivado/2018.3/lib/lnx64.o/libtcl8.5.so(+0x334af) [0x7f51ccef74af]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>which looked like a familiar pattern - a frontend (tcl) binding to a C++ backend. So I was like, ok, may be if I grep the object dump of one of these <code>.so</code>, I could get the params? That didn&#x27;t work. But what did work was, when I treated the <code>.so</code> in grep as a text file and searched for a &quot;something-dot-camelCase&quot; pattern, and voila, everything was in plain sight:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">place.debugCongestion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugCrash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugFFGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugLightTimer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugMacroInterleavingOptimization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugShape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugShapeAppend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">place.debugWireLen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And many more such as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.allowEmptyHierCellNets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.allowEmptyHierCells</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.allowInverterPushing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.annotateModifiedPrims</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.applyFinishingTouch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.applyLogicProp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.applyPostPwroptCleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logicopt.applyRestruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Similarly, there are tuneable params that look like <code>synth.*</code>, <code>route.*</code>, <code>power.*</code>, <code>timing.*</code>. in their respective <code>librdi_*.so</code>. That&#x27;s all for this post. May be if you have a use-case, where you wanted vivado to do something, but it&#x27;s not visible, one of these parameters might come into use! Of course I get Xilinx&#x27;s point about these being internal knobs ;).</p><p>FYI following is the command with regex I used:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">grep -a -o -E &#x27;[a-zA-Z0-9]{3,}.[a-z]([a-z0-9][A-Z][A-Z0-9][a-z]|[A-Z0-9][a-z][a-z0-9][A-Z])[a-ZA-Z0-9]{3,}&#x27; /opt/Xilinx/Vivado/2018.3/lib/lnx64.o/librdi_place.so</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can find about 5000 of the params I scraped, in this repository: <a href="https://github.com/syed-ahmed/vivado-hacks" target="_blank" rel="noopener noreferrer">https://github.com/syed-ahmed/vivado-hacks</a></p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/vivado">vivado</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/fpga">fpga</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/tcl">tcl</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/reconfig-dev/reconfig/edit/main/reconfig/blog/blog/2020-03-31-use-all-tunable-vivado-internal-params/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/yaml-based-vivado-hardware-project"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->Creating Vivado Hardware Platform using YAML</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Syed Tousif Ahmed.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.19767bf0.js"></script>
<script src="/assets/js/main.47d521c6.js"></script>
</body>
</html>